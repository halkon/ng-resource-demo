<!DOCTYPE html>
<html ng-app="demoApp" ng-cloak>
<head>
<link href='http://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,700,700italic' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
<link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.2/normalize.min.css" rel="stylesheet" type="text/css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.28/angular.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.28/angular-resource.min.js"></script>
  <meta charset="utf-8">
  <title>Encore Sandbox Template</title>
</head>
<body ng-controller="demoCtrl">
    <h1>Encore Sandbox - {demo item}</h1>
    <!-- Demo HTML Goes Here -->

    <div ng-repeat="user in users">
        getName: {{ user.getName() }}<br />
        first: {{ user.first }}<br />
        last: {{ user.last }}<br />
        <span ng-if="user.lazy">
            <h6>BOSSMAN SAYS LAZY</h6>
        </span>
        <hr />
    </div>

    <button ng-click="createUser()">Create User</button>
    <button ng-click="getUser()">Get User</button>
</body>
<script>
var app = angular.module('demoApp', ['ngResource']);

app.controller('demoCtrl', function ($scope, $resource) {
    // Scope vars go here

    var svc = $resource('http://localhost:2403/user/:id', {
        'id': '@id'
    }, {
        update: {
            method: 'PUT'
        }
    });

    svc.prototype.getName = function () {
        return this.first + ' ' + this.last;
    };

    $scope.svc = svc;


    $scope.users = svc.query();

    $scope.createUser = function () {
        var user = new svc({
            first: 'Chris',
            last: 'Cantu',
            lazy: false
        });

        user.$save().then(function () {
            user.lazy = true;
            user.$save();
        });
    };

    $scope.getUser = function () {
        var user = svc.get({ id: "7bfdb2b091f0e8cb" });
        user.$promise.then(function () {
            console.log(user);
        });
    };

    window.scope = $scope;

});
</script>
</html>